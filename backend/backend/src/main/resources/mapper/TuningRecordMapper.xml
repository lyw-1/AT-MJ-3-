<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mold.digitalization.mapper.TuningRecordMapper">
  <resultMap id="BaseResultMap" type="com.mold.digitalization.entity.TuningRecord">
    <id column="id" property="id" />
    <result column="mold_id" property="moldId" />
    <result column="mold_code" property="moldCode" />
    <result column="image_url" property="imageUrl" />
    <result column="stage" property="stage" />
    <result column="record_time" property="recordTime" />
    <result column="equipment" property="equipment" />
    <result column="pressure" property="pressure" />
    <result column="flow_rate" property="flowRate" />
    <result column="mud_material" property="mudMaterial" />
    <result column="mud_hardness" property="mudHardness" />
    <result column="remark" property="remark" />
    <result column="create_time" property="createTime" />
    <result column="update_time" property="updateTime" />
  </resultMap>

  <sql id="Base_Column_List">
    id, mold_id, mold_code, image_url, stage, record_time, equipment, pressure, flow_rate, mud_material, mud_hardness, remark, create_time, update_time
  </sql>

  <select id="selectByMoldCode" parameterType="string" resultMap="BaseResultMap">
    SELECT
      <include refid="Base_Column_List"/>
    FROM tuning_record
    WHERE mold_code = #{moldCode}
    ORDER BY record_time DESC, id DESC
  </select>

  <select id="selectByMoldId" parameterType="long" resultMap="BaseResultMap">
    SELECT
      <include refid="Base_Column_List"/>
    FROM tuning_record
    WHERE mold_id = #{moldId}
    ORDER BY record_time DESC, id DESC
  </select>
</mapper>