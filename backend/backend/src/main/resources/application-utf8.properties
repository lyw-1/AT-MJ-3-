# UTF-8编码配置文件示例
# 此文件展示了所有配置项的正确UTF-8编码格式

# 服务器配置
server.port=8081
server.servlet.context-path=/
server.tomcat.uri-encoding=UTF-8

# 数据库连接配置
spring.datasource.url=jdbc:mysql://localhost:3306/mold_digitalization?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
spring.datasource.username=at_mj_1_user
spring.datasource.password=App@2023
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# 数据库连接池配置
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000

# MyBatis-Plus配置
mybatis-plus.mapper-locations=classpath:mapper/*.xml
mybatis-plus.type-aliases-package=com.mold.digitalization.entity,com.atmj.mold.digitization.entity
mybatis-plus.configuration.map-underscore-to-camel-case=true
mybatis-plus.configuration.cache-enabled=false
mybatis-plus.global-config.db-config.id-type=auto

# 日志配置
logging.level.root=INFO
logging.level.com.mold.digitalization=DEBUG
logging.level.com.mold.process=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.charset.console=UTF-8
logging.charset.file=UTF-8

# 文件上传配置
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=100MB

# 邮件服务配置
spring.mail.host=smtp.example.com
spring.mail.port=25
spring.mail.username=system@example.com
spring.mail.password=your_email_password
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.default-encoding=UTF-8
mail.sender=system@example.com
mail.sender.name=模具数字化系统

# 国际化配置
spring.messages.encoding=UTF-8
spring.messages.basename=i18n/messages

# JSON配置
spring.jackson.time-zone=Asia/Shanghai
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.locale=zh_CN

# 缓存配置
spring.cache.type=redis
spring.redis.host=localhost
spring.redis.port=6379
spring.redis.database=0
spring.redis.timeout=60000
spring.redis.lettuce.pool.max-active=8
spring.redis.lettuce.pool.max-wait=-1
spring.redis.lettuce.pool.max-idle=8
spring.redis.lettuce.pool.min-idle=0

# 消息队列配置
spring.rabbitmq.host=localhost
spring.rabbitmq.port=5672
spring.rabbitmq.username=${RABBITMQ_USERNAME:admin}
spring.rabbitmq.password=${RABBITMQ_PASSWORD:changeMe!}
spring.rabbitmq.virtual-host=/

# JWT配置
jwt.secret=YWNiZjY0ZWEtYmMyMS00YjgzLThkZjAtNjNmZjE2MDdiZGEzMjdkMGVkODktN2Q0OS00YWU5LTlmNGMtZmY0ZjQwMmQzMjc5
jwt.expiration=86400000
jwt.refresh-expiration=2592000000

# 跨域配置
spring.mvc.dispatch-options-request=true
spring.mvc.cors.allowed-origins=*
spring.mvc.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
spring.mvc.cors.allowed-headers=*

# 用户锁定机制配置
user.lock.max-failed-attempts=5
user.lock.duration-minutes=30
user.lock.cache-enabled=true
user.lock.cache-expire-minutes=60
user.lock.failure-count-expire-minutes=10
user.lock.unlock-task-interval-minutes=10

# 操作日志清理策略配置
log.clean.enabled=true
log.clean.retention-days=90
log.clean.cron=0 0 2 * * ?
log.clean.critical-retention-days=365

# 敏感操作级别定义
log.sensitive.level.critical=user:delete,role:delete,permission:delete
log.sensitive.level.high=user:update,password:change,role:update,setting:change
log.sensitive.level.normal=login,logout,data:query
