# API 版本控制迁移清单

## 📋 迁移检查表

### Phase 1: 准备阶段 ✅
- [x] 制定版本控制策略文档
- [x] 创建示例Controller模板
- [x] 编写Controller更新指南
- [x] 通知团队成员迁移计划

### Phase 2: 实施阶段 🚧
- [ ] **认证模块**
  - [ ] 更新AuthController使用 `/api/v1/auth`
  - [ ] 测试登录、登出、刷新令牌接口
  - [ ] 更新前端API调用

- [ ] **用户模块**
  - [ ] 更新UserController使用 `/api/v1/users`
  - [ ] 测试所有用户相关接口
  - [ ] 更新前端用户管理模块

- [ ] **模具模块**
  - [ ] 更新MoldController使用 `/api/v1/molds`
  - [ ] 测试模具CRUD接口
  - [ ] 更新前端模具管理模块

- [ ] **任务模块**
  - [ ] 更新TaskController使用 `/api/v1/tasks`
  - [ ] 测试任务管理接口
  - [ ] 更新前端任务模块

- [ ] **其他模块**
  - [ ] 检查并更新所有Controller
  - [ ] 统一API路径格式

### Phase 3: 验证阶段 🔍
- [ ] **功能测试**
  - [ ] 所有API接口正常工作
  - [ ] 认证流程正常
  - [ ] 权限控制正常

- [ ] **兼容性测试**
  - [ ] 旧版API仍可访问（过渡期）
  - [ ] 前后端集成正常
  - [ ] 移动端接口正常

- [ ] **文档更新**
  - [ ] Swagger文档更新
  - [ ] API文档更新
  - [ ] 迁移指南完善

### Phase 4: 清理阶段 🧹
- [ ] **移除旧接口**
  - [ ] 移除无版本路径（如 `/auth`, `/api/auth`）
  - [ ] 更新.gitignore（如果需要）
  - [ ] 清理废弃代码

- [ ] **发布通知**
  - [ ] 发布迁移完成公告
  - [ ] 更新开发者文档
  - [ ] 提供技术支持

## 📅 时间表

| 阶段 | 时间 | 负责人 | 交付物 |
|------|------|--------|--------|
| 准备 | 第1天 | AI助手 | 策略文档、模板 |
| 实施 | 第2-3天 | 开发团队 | 迁移后的Controller |
| 验证 | 第4天 | 测试团队 | 测试报告 |
| 清理 | 第5天 | DevOps | 清理后的代码库 |

## 🚨 风险与应对

| 风险 | 影响 | 应对措施 |
|------|------|----------|
| 前端兼容性问题 | 用户无法访问API | 保留旧接口3个月 |
| 测试不充分 | 隐藏bug | 全面的回归测试 |
| 文档不同步 | 开发者困惑 | 同步更新所有文档 |
| 团队抵触 | 进度延迟 | 充分的培训和支持 |

## 📞 支持资源

- **文档**: `docs/api/versioning.md`
- **指南**: `docs/api/controller-update-guide.md`
- **示例**: `controller/v1/ExampleController.java`
- **Slack**: #api-migration-support
- **Email**: api-support@company.com
